<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Data Preparation • week2DataChallenge</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Data Preparation">
<meta property="og:description" content="week2DataChallenge">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">week2DataChallenge</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/0_GettingSetupWithRStudio.html">Getting Set Up With RStudio</a>
    </li>
    <li>
      <a href="../articles/1_DataPrep.html">Data Preparation</a>
    </li>
    <li>
      <a href="../articles/2_HealthAssociationAnalysis.html">Introduction to Health Association Analysis for Movement Behaviour Data</a>
    </li>
    <li>
      <a href="../articles/3_IntroToCompositionalDataAnalysis.html">Compositional Data Analysis Tutorial</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="1_DataPrep_files/header-attrs-2.6/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Data Preparation</h1>
            
      
      
      <div class="hidden name"><code>1_DataPrep.Rmd</code></div>

    </div>

    
    
<p>This tutorial is on pre-processing for non-accelerometer data. Pre-processing is an important part of the project pipeline – we hope this will give you a lot of flexibility e.g. to decide what variables you want to work with. This tutorial contains:</p>
<ol style="list-style-type: decimal">
<li>Troubleshooting</li>
<li>Introduction to available data</li>
<li>Processing covariate data</li>
<li>Processing health outcomes data</li>
<li>Merging data files</li>
<li>Participant withdrawals</li>
<li>Exclusions</li>
<li>Preprocessing</li>
<li>Finding out more</li>
</ol>
<div id="troubleshooting" class="section level1">
<h1 class="hasAnchor">
<a href="#troubleshooting" class="anchor"></a>Troubleshooting</h1>
<p>If nothing is working, speak to Rosemary – <a href="mailto:rosemary.walmsley@gtc.ox.ac.uk" class="email">rosemary.walmsley@gtc.ox.ac.uk</a>. If needed, we have pre-processed data you can use.</p>
</div>
<div id="introduction-to-available-data" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction-to-available-data" class="anchor"></a>Introduction to available data</h1>
<p>Different files are available from UK Biobank for different data types. We will use these files, available under <code>/cdtshared/wearables/health_data_files</code>:</p>
<ul>
<li>
<code>ukb41733.csv</code>: A ‘standard’ dataset, with one line per participant. It contains most ‘straightforward’ data e.g. sex, BMI, smoking status etc.</li>
<li>
<code>hesin_all.csv</code>: Hospital Episode Statistics data. Each line is associated with an in-hospital diagnosis.</li>
<li>
<code>death.txt</code>: Death register data. This has one line per participant who has died, giving their date of death.</li>
<li>
<code>death_cause.txt</code>: Death register data on cause of death (multi-line per participant).</li>
<li>
<code>withdrawals.csv</code>: List of participants who have withdrawn from UK Biobank.</li>
<li>
<code>accelerometer-basic.csv</code>: A basic accelerometer dataset. Hopefully you will have your own version, as prepared last week.</li>
<li>
<code>dataset-partially-processed</code>: A partially processed dataset, for this tutorial.</li>
<li>
<code>dataset-with-preprocessing-done.csv</code>: A dataset with the steps in this tutorial (roughly) already performed, for use in the next tutorial if needed.</li>
<li>
<code>ukb41733.enc_ukb</code>: A copy of all UK Biobank fields from the main dataset (i.e. not accelerometry, health data etc). Not needed for a basic analysis - see further info below.</li>
</ul>
<p>Data should not ever be downloaded to your local machine. All data should be deleted at the end of the Data Challenge.</p>
<p>The next session uses Python scripts. To ensure you have the appropriate dependencies, run:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> activate wearables</span></code></pre></div>
<p>If you later want to use RMarkdown, you might have to run: <code>conda deactivate</code>.</p>
</div>
<div id="processing-covariate-data" class="section level1">
<h1 class="hasAnchor">
<a href="#processing-covariate-data" class="anchor"></a>Processing covariate data</h1>
<p>This section is included to give you an idea of how to process UK Biobank data from scratch, and to allow you to flexibly go back and consider the variables you want to use (among those available in the <a href="https://biobank.ndph.ox.ac.uk/ukb/" class="external-link">UK Biobank Data Showcase</a>). However, we have already done the steps here and saved the files for you, so there is no need to redo this.</p>
<p>Data from UK Biobank comes in a <code>.enc_ukb</code> file, from which particular variables are extracted. Once you have an extracted <code>.csv</code> file both the column names and the variable codings need processing. Different tools are available to help with this. We’re using a repo that Shing and Rosemary have developed to get going quickly. <a href="https://ukb-download-and-prep-template.readthedocs.io/en/latest/started.html" class="external-link">Read the docs</a> and <a href="https://ukb-download-and-prep-template.readthedocs.io/en/latest/download.html#downloading-participant-data" class="external-link">find it on GitHub</a>. There are usually three key steps:</p>
<ul>
<li><a href="https://ukb-download-and-prep-template.readthedocs.io/en/latest/started.html#installation" class="external-link">Installation</a></li>
<li>
<a href="https://ukb-download-and-prep-template.readthedocs.io/en/latest/download.html#extracting-participant-data-to-csv" class="external-link">Extracting a .csv file from the .enc_ukb file</a> (don’t do this until you’ve read on!)</li>
<li><a href="https://ukb-download-and-prep-template.readthedocs.io/en/latest/core.html#relabelling-and-recoding-participant-data" class="external-link">Automated pre-processing of all variables</a></li>
</ul>
<p>We’ve done step 2 using a generic (and large!) set of analysis variables, corresponding to those in <code>analysisCols.txt</code> in the above repo. The output from that is the <code>ukb41733.csv</code> file in the folder - and you can go ahead and use it for step 3. If you need other variables, feel free to go back and try step 2 - the <code>ukb41733.enc_ukb</code> file is available for this purpose. You will need to copy it to another folder to work with it (as the processing file needs to write to the folder it is in) and also change the permissions on <code>ukbconv</code> so it is executable (<code>chmod u+x ukbconv</code>).</p>
<p>We’ve also done step 3 with the same set of columns: this is <code>dataset-partially-processed.csv</code> (which has also had some health data added). If you go back and do step 2 you’ll have to do step 3 too. You might also jump in at step 3 if you want instances and array indices other than the first measurement at baseline assessment (see next paragraph).</p>
<p>You can often use this preprocessing pipeline in a fairly blind way. However, <em>a word of caution</em>: variables in UK Biobank come with instances and array indices. In the csv file before processing, they are named as fieldnumber.instance.array_index (e.g. 2443.1.0 for the first item (“0”) at the first repeat visit (“1”)). Repeat 1 was a resurvey among a limited number of participants, repeat 2 is the imaging revisit. Both apply only to a subset of participants. More importantly, some variables have multiple items, as participants could check multiple boxes (e.g. <a href="https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=6138" class="external-link">6138</a> on qualifications) or had multiple measures taken (e.g. blood pressure measurements) In these cases, you’ll have to <a href="https://ukb-download-and-prep-template.readthedocs.io/en/latest/advanced.html" class="external-link">change the defaults</a> to usefully use the variables.</p>
<p>Finding this hard to use? Spotted a bug? We’d love to get feedback and to make it as user-friendly as possible.</p>
</div>
<div id="processing-health-outcomes-data" class="section level1">
<h1 class="hasAnchor">
<a href="#processing-health-outcomes-data" class="anchor"></a>Processing health outcomes data</h1>
<p>The next step is to add health outcomes data to the covariate data file. Follow <a href="https://ukb-download-and-prep-template.readthedocs.io/en/latest/core.html#adding-hospital-episode-statistics" class="external-link">these steps</a>.</p>
<p>This describes working with Hospital Episode Statistics (<code>hesin_all.csv</code>). You will probably also want to use data on deaths, which can be found in the <code>death.txt</code> and <code>death_cause.txt</code> files. (Even if mortality is not your outcome, if you are doing analyses of survival data, participants are censored at death for other outcomes. Also, sometimes a disease event may appear in the death register without appearing in Hospital Episode Statistics e.g. a fatal stroke occurring outside of hospital would be recorded on the death register but not in HES).</p>
<p>Censoring dates for all outcome data are the most recent available in the Data Portal (<a href="https://biobank.ctsu.ox.ac.uk/crystal/exinfo.cgi?src=Data_providers_and_dates" class="external-link uri">https://biobank.ctsu.ox.ac.uk/crystal/exinfo.cgi?src=Data_providers_and_dates</a>) i.e. 31/12/20 for the death register; 31/12/20 for HES in England and Scotland, 28/02/18 for HES in Wales.</p>
</div>
<div id="merging-data-files" class="section level1">
<h1 class="hasAnchor">
<a href="#merging-data-files" class="anchor"></a>Merging data files</h1>
<p>You can merge data files using the ‘eid’ column. Note that with accelerometer data, the ‘eid’ column may need adjusting to remove extra text e.g. </p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># First we'll load data.table, a package that makes reading large files easier</span>
<span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://r-datatable.com" class="external-link">"data.table"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"data.table"</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span>

<span class="co"># Then we load acc data and covariate data</span>
<span class="va">acc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fread.html" class="external-link">fread</a></span><span class="op">(</span><span class="st">"/cdtshared/wearables/health_data_files/accelerometer-basic.csv"</span><span class="op">)</span><span class="op">)</span>
<span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fread.html" class="external-link">fread</a></span><span class="op">(</span><span class="st">"/cdtshared/wearables/health_data_files/dataset-partially-processed.csv"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Then we relabel eids to same format</span>
<span class="va">acc</span><span class="op">$</span><span class="va">eid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"_90001_0_0.gz"</span>, <span class="st">""</span>, <span class="va">acc</span><span class="op">$</span><span class="va">eid</span><span class="op">)</span> <span class="co"># This line replaces the first string with the second one wherever it appears in acc$eid</span>

<span class="co"># Then we merge</span>
<span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">df</span>, <span class="va">acc</span>, by <span class="op">=</span> <span class="st">"eid"</span><span class="op">)</span></code></pre></div>
</div>
<div id="withdrawals" class="section level1">
<h1 class="hasAnchor">
<a href="#withdrawals" class="anchor"></a>Withdrawals</h1>
<p>Participants have the right to withdraw at any time from UK Biobank. For participants who withdrew between the dataset being generated and it being used, we need to withdraw them manually.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>
<span class="va">w</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"/cdtshared/wearables/health_data_files/withdrawals.csv"</span>, header <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span><span class="op">[</span><span class="op">!</span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">eid</span> <span class="op">%in%</span> <span class="va">w</span><span class="op">$</span><span class="va">V1</span><span class="op">)</span>,  <span class="op">]</span>
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></code></pre></div>
</div>
<div id="exclusions" class="section level1">
<h1 class="hasAnchor">
<a href="#exclusions" class="anchor"></a>Exclusions</h1>
<p>Before working with the data, we usually exclude some participants.</p>
<p>First, we exclude participants with poor quality accelerometer data. A standard protocol for exclusions in UK Biobank is to:</p>
<ul>
<li>Exclude participants whose device could not be calibrated:</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span><span class="op">[</span><span class="va">df</span><span class="op">$</span><span class="va">quality.goodCalibration</span> <span class="op">==</span><span class="fl">1</span>, <span class="op">]</span></code></pre></div>
<ul>
<li>Exclude participants who had &lt;3 days wear or did not have wear in each hour of the 24 hour day:</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span><span class="op">[</span><span class="va">df</span><span class="op">$</span><span class="va">quality.goodWearTime</span> <span class="op">==</span> <span class="fl">1</span>, <span class="op">]</span></code></pre></div>
<ul>
<li>Exclude participants for whom &gt;1% of values were clipped (fell outside the sensor’s range) before or after calibration:</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span><span class="op">[</span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">clipsBeforeCalibration</span> <span class="op">&lt;</span> <span class="fl">0.01</span><span class="op">*</span><span class="va">df</span><span class="op">$</span><span class="va">totalReads</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">clipsAfterCalibration</span> <span class="op">&lt;</span><span class="fl">0.01</span><span class="op">*</span><span class="va">df</span><span class="op">$</span><span class="va">totalReads</span><span class="op">)</span> , <span class="op">]</span></code></pre></div>
<ul>
<li>Exclude participants with unrealistically high average acceleration values:</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span><span class="op">[</span><span class="va">df</span><span class="op">$</span><span class="va">acc.overall.avg</span> <span class="op">&lt;</span> <span class="fl">100</span>, <span class="op">]</span></code></pre></div>
<p>If you’re interested in finding out more <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0169649" class="external-link">this is a good reference</a>. There is a lot of literature on accelerometer data quality!</p>
<p>There are two other types of exclusions you may wish to make, depending on your planned analysis. These can be done now, or later:</p>
<ul>
<li>Health-related exclusions. For example, if you are analysing incident disease, you may wish to exclude people who had prevalent disease at the time they wore the accelerometer.</li>
<li>Missing covariate data. If small numbers of participants have missing data in covariates, you may wish to exclude them. (Alternatively, you could look into missing data imputation).</li>
</ul>
<p><em>Important:</em> You should record how many participants were excluded at each of the above steps.</p>
</div>
<div id="preprocessing" class="section level1">
<h1 class="hasAnchor">
<a href="#preprocessing" class="anchor"></a>Preprocessing</h1>
<p>As described above the data has had some rough preprocessing already performed, corresponding to use of the UK Biobank data dictionary to recode variables. However, this is automated and imperfect. For example, some numeric variables may have special values indicating missing data, which have not been automatically processed (an example is <a href="https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=1309" class="external-link">fresh fruit intake</a>).</p>
<p>Now is a good time to look at the variables you’re planning to use in more detail, understand their distribution, recode any values you wish to recode, and change groupings as required. For example, the <a href="https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=21000" class="external-link">ethnicity variable</a> has many distinctions, some of which apply to very few participants, so you may wish to recode it for statistical analyses. Spending time understanding the data in detail now will not be wasted!</p>
<p>One thing you will need to do is add an age-at-accelerometer-wear variable. Here’s an example of some code to do that:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ADD DATE OF BIRTH</span>
<span class="va">df</span><span class="op">$</span><span class="va">approx_dob</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">YearOfBirth</span>, <span class="va">df</span><span class="op">$</span><span class="va">MonthOfBirth</span>, <span class="st">"15"</span>, sep <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span>,
          <span class="st">"%Y-%B-%d"</span><span class="op">)</span>

<span class="va">df</span><span class="op">$</span><span class="va">age_entry_days</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/base/difftime.html" class="external-link">difftime</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">EndTimWear</span>, <span class="st">"%Y-%m-%d %H:%M:%S"</span>, tz <span class="op">=</span> <span class="st">"Europe/London"</span><span class="op">)</span>, 
           <span class="va">df</span><span class="op">$</span><span class="va">approx_dob</span>,
           units <span class="op">=</span> <span class="st">"days"</span><span class="op">)</span>

<span class="va">df</span><span class="op">$</span><span class="va">age_entry_years</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">age_entry_days</span><span class="op">)</span><span class="op">/</span><span class="fl">365.25</span>
<span class="va">df</span><span class="op">$</span><span class="va">broadAgeGroup</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cut.html" class="external-link">cut</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">age_entry_years</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">40</span>, <span class="fl">50</span>, <span class="fl">60</span>, <span class="fl">70</span>, <span class="fl">80</span> <span class="op">)</span>, right <span class="op">=</span> <span class="cn">FALSE</span>, labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"40-49"</span>, <span class="st">"50-59"</span>, <span class="st">"60-69"</span>, <span class="st">"70-79"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>If you’re interested in incident disease analyses, you might also want to add a follow-up time variable i.e. the difference between the time the participant entered the study (accelerometer wear date) and when they left it: death, censoring (end date of study data, at which point they had not had an event) or the event of interest. The next tutorial contains an example.</p>
<p>The <a href="https://biobank.ndph.ox.ac.uk/showcase/search.cgi" class="external-link">UK Biobank Data Showcase</a> is the go-to resource for understanding variables in the data.</p>
<p>Remember to write your prepared dataset to a file so that you can use it again!!</p>
</div>
<div id="finding-out-more" class="section level1">
<h1 class="hasAnchor">
<a href="#finding-out-more" class="anchor"></a>Finding out more</h1>
<p>To find out more about particular UK Biobank variables, use the <a href="https://biobank.ndph.ox.ac.uk/ukb/" class="external-link">Data Showcase</a></p>
<p>To find out more about UK Biobank data collection and history, <a href="https://journals.plos.org/plosmedicine/article?id=10.1371/journal.pmed.1001779" class="external-link">this</a> is a good summary</p>
<p>In addition to what we’ve shared here, UK Biobank is an open resource and several other open-source tools are available to support its use (<a href="https://git.fmrib.ox.ac.uk/fsl/funpack" class="external-link">an example</a>)</p>
<p>In the future, UK Biobank will be moving to an <a href="https://www.ukbiobank.ac.uk/learn-more-about-uk-biobank/news/uk-biobank-creates-cloud-based-health-data-analysis-platform-to-unleash-the-imaginations-of-the-world-s-best-scientific-minds" class="external-link">Amazon Web Services model</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by .</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link external-link">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
